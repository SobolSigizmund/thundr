<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" lang="en-us"/>
	<meta http-equiv="X-UA-Compatible" content="chrome=1"/><!-- Use Chrome Frame if installed -->
	<!--[if lt IE 9]> <script src="scripts/lib/html5shiv.js"></script> <![endif]--><!-- Enable HTML5 in IE8 and below -->
	<title>thundr - on Google Appengine</title>
	<link rel="shortcut icon" href="./favicon.ico" />
	<meta name="description" content=""/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Allows website to respond to natural agent size -->
	<meta name="keywords" content=""/>
	<base href="../../" />
	
	<meta name="google-site-verification" content="V7Os0LLLfRti7XGzTPnlO_FfsjrL6Ldi3IKeq0tVGaY" />
	<!--
	<t:style src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css"/>
	<t:style src="styles/lib/bootstrap/bootstrap.css"/>
	-->
	<link rel="stylesheet" href="styles/lib/bootstrap/1a11dd2d.bootstrap.css"></link>
	<link rel="stylesheet" href="styles/dcca9bf0.main.css"></link>
	<link rel="stylesheet" href="styles/lib/font/4712f287.font-awesome.css"></link>
	<!--[if IE 7]>
	<link rel="stylesheet" href="styles/lib/font/8edda79c.font-awesome-ie7.css">
	<![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<!--
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
	-->
	<script src="scripts/vendor/bootstrap/41e29a31.bootstrap.min.js"></script>
	<script src="scripts/vendor/bootstrap/be7d85b6.bootstrap-collapse.js"></script>
	<script src="scripts/vendor/bootstrap/d0829daa.bootstrap-dropdown.js"></script>
	<script src="scripts/vendor/bootstrap/9fb1af1d.bootstrap-tab.js"></script>
	<script src="scripts/vendor/bootstrap/0d084ac1.bootstrap-affix.js"></script>
</head>
<body>
	 <header class="container">
		<nav class="navbar">
			<div class="navbar-inner">
				<div class="navbar-top">
					<a class="brand" href="./index.html"><img src="images/79eca7d9.logoFullSmall.png"/></a>

					<ul class="nav" role="navigation">
						 
							
								<li class="dropdown ">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown" >thundr <b class="caret"></b></a>

									<ul class="dropdown-menu">
										 
										<li class="">
											<a href="modules/thundr/basics.html">
												
													Basics
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/controllers.html">
												
													Controllers
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/views.html">
												
													Views
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/actions.html">
												
													Actions
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/injection-context.html">
												
													Dependancy injection
												
											</a>
										</li>
										 
									</ul>

								</li>
							
						  
							
								<li class="">
									<a href="modules/thundr-gae/appengine.html">thundr-gae</a>
								</li>
							
						 
					</ul>
				</div>
			</div>

		</nav>
		
	</header>

	
	<div class="container">
		<div class="row">
			<aside class="module_nav_container span3">
				<div class="module_nav">
					
					<ul class="nav nav-list" role="navigation">
					 
							
						<li class="nav-header active">
							<a href="modules/thundr-gae/appengine.html">
								
									GAE
								
							</a>
						</li>

						
							
								
								<li><a href="modules/thundr-gae/appengine.html">Overview</a></li>
								<li class="divider"></li>
								

								
									
										
										
										<li><a href="modules/thundr-gae/appengine.html#settingUp">
											Setting Up
											
										</a></li>
									
									
								
									
										
										
										<li><a href="modules/thundr-gae/appengine.html#moduleFeatures">
											Module Features
											
										</a></li>
									
									
								
							
							
						
					  
					</ul>

					
				</div>
			</aside>

			<article id="" class="span9">
			<div class="page-header">
	<h1>thundr <small>on Google Appengine</small></h1>
</div>

<section class="overview">
	<h2>Overview</h2>
<p>Google Appengine (GAE) is a PaaS provided and run by Google. You can read more about it <a href="https://developers.google.com/appengine/docs/">here</a>

</p>
<p><em>thundr-gae</em> is a thundr module which enables thundr to run in this environment adding abstractions around some common functions.</p>

</section>

 


	<section id="settingUp">
		<h4>Setting Up</h4>
<p>Beyond <a href="basics.html#applicationConfiguration">normal thundr setup</a> (i.e. <code>web.xml</code>, <code>application.properties</code>, <code>modules.properties</code> and an <code>InjectionConfiguration</code>), you will need to pull in the <em>thundr-gae</em> module and configure it.

</p>
<p>This is accomplished by adding the <em>thundr-gae</em> library to your project (or adding the dependency to your maven or similar config). You then need to load the <em>thundr-gae</em> module by adding it to your <code>modules.properties</code> file.

</p>
<p>pom.xml
</p>
<pre><code class="lang-xml">…
<span class="tag">&lt;<span class="title">dependency</span>&gt;</span>
    <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.threewks.thundr<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span>
    <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>thundr-gae<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span>
    <span class="tag">&lt;<span class="title">version</span>&gt;</span>0.9.6<span class="tag">&lt;/<span class="title">version</span>&gt;</span>
    <span class="tag">&lt;<span class="title">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="title">scope</span>&gt;</span>
<span class="tag">&lt;/<span class="title">dependency</span>&gt;</span>
…</code></pre>
<p>modules.properties

</p>
<pre><code class="lang-java">com.mycompany.myapp=
com.threewks.thundr.gae=</code></pre>
<blockquote>
<p>Remember order is important in modules.properties - include the <em>thundr-gae</em> module <strong>after</strong> you application.</p>
</blockquote>

	</section>






	<section id="moduleFeatures">
		<h4>Module Features</h4>
<ul>
<li><h5>HttpService</h5>
<p>The module provides an implementation of the HttpService defined in the thundr-http module <span class="label label-warning">Undocumented</span>. This is required because of the need to use the <a href="https://developers.google.com/appengine/docs/java/urlfetch/">UrlFetchService</a>. You can then inject it into your controllers and services like this:</p>
<pre><code class="lang-java">…
<span class="keyword">private</span> HttpService httpService;

<span class="keyword">public</span> MyController(HttpService httpService){
   <span class="keyword">this</span>.httpService = httpService;
}
…</code></pre>
</li>
<li><h5>CounterRepository</h5>
<p>Atomic incrementing counters can be a little tricky in distributed environment. <em>thundr-gae</em> provides an implementation for sharding counters based on the discussion <a href="https://developers.google.com/appengine/articles/sharding_counters">here</a>.</p>
<p>You can use this in your project by adding it to your injection configuration like this:</p>
<pre><code class="lang-java">…
MemcacheService cacheService = MemcacheServiceFactory.getMemcacheService();
DatastoreService datastoreService = DatastoreServiceFactory.getDatastoreService();
CounterRepository counterRepository = <span class="keyword">new</span> DatastoreCounterRepository(cacheService, datastoreService);
injectionContext.inject(counterRepository).as(CounterRepository.class);
…</code></pre>
<p>You can later use this in code like this:</p>
<pre><code class="lang-java"><span class="keyword">long</span> currentCount = counterRepository.incrementCount(<span class="string">"CounterType"</span>, entityId);</code></pre>
</li>
</ul>

	</section>



 
			</article>
		</div>
	</div>
	
	
	<footer class="container">
		<div class="navbar">
			<div class="navbar-inner">
				<span class="navbar-text pull-right">
					Brought to you by <a href="http://www.3wks.com.au" title="3wks"><img class="threewksLogo" src="http://3wks.com.au/images/3wks_logo_2.png"/></a>
				</span>
				<span class="navbar-text">
					<a href="mailto:nick@3wks.com.au?Subject=thundr">
						<i class="icon icon-envelope-alt"></i> 
						Get in touch
					</a>
				</span>
				<span class="navbar-text">
					<a href="https://groups.google.com/forum/?fromgroups#!forum/thundr-framework">
						<i class="icon icon-group"></i> 
						Join us on Google Groups 
					</a>
				</span>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-37139757-1']);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>

	<script src="scripts/16ccd7a9.amd-app.js"></script>
</body>
</html>
		