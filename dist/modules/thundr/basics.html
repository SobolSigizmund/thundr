<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" lang="en-us"/>
	<meta http-equiv="X-UA-Compatible" content="chrome=1"/><!-- Use Chrome Frame if installed -->
	<!--[if lt IE 9]> <script src="scripts/lib/html5shiv.js"></script> <![endif]--><!-- Enable HTML5 in IE8 and below -->
	<title>thundr - basics</title>
	<link rel="shortcut icon" href="./favicon.ico" />
	<meta name="description" content=""/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Allows website to respond to natural agent size -->
	<meta name="keywords" content=""/>
	<base href="../../" />
	
	<meta name="google-site-verification" content="V7Os0LLLfRti7XGzTPnlO_FfsjrL6Ldi3IKeq0tVGaY" />
	<!--
	<t:style src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css"/>
	<t:style src="styles/lib/bootstrap/bootstrap.css"/>
	-->
	<link rel="stylesheet" href="styles/lib/bootstrap/1a11dd2d.bootstrap.css"></link>
	<link rel="stylesheet" href="styles/dcca9bf0.main.css"></link>
	<link rel="stylesheet" href="styles/lib/font/4712f287.font-awesome.css"></link>
	<!--[if IE 7]>
	<link rel="stylesheet" href="styles/lib/font/8edda79c.font-awesome-ie7.css">
	<![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<!--
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
	-->
	<script src="scripts/vendor/bootstrap/41e29a31.bootstrap.min.js"></script>
</head>
<body data-spy="scroll" data-target=".module_nav">
	 <header class="container">
		<nav class="navbar">
			<div class="navbar-inner">
				<div class="navbar-top">
					<a class="brand" href="./index.html"><img src="images/79eca7d9.logoFullSmall.png"/></a>

					<ul class="nav" role="navigation">
						 
							
								<li class="dropdown ">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown" >thundr <b class="caret"></b></a>

									<ul class="dropdown-menu">
										 
										<li class="active">
											<a href="modules/thundr/basics.html">
												
													Basics
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/controllers.html">
												
													Controllers
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/views.html">
												
													Views
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/actions.html">
												
													Actions
												
											</a>
										</li>
										  
										<li class="">
											<a href="modules/thundr/injection-context.html">
												
													Dependancy injection
												
											</a>
										</li>
										 
									</ul>

								</li>
							
						  
							
								<li class="">
									<a href="modules/thundr-gae/appengine.html">thundr-gae</a>
								</li>
							
						 
					</ul>
				</div>
			</div>

		</nav>
		
	</header>

	<div class="container">
		<div class="row">
	<aside class="module_nav_container span3">
		<div class="module_nav">
			
			<ul class="nav nav-list" role="navigation">
			 
					
				<li class="nav-header active">
					<a href="modules/thundr/basics.html">
						
							Basics
						
					</a>
				</li>

				
					
						
						<li><a href="modules/thundr/basics.html#page-overview" data-target="#page-overview">Overview</a></li>
						<li class="divider"></li>
						

						
							
								
								
								<li><a href="modules/thundr/basics.html#basicExample" data-target="#basicExample">
									Basic Example
									
								</a></li>
							
							
						
							
								
								
								<li><a href="modules/thundr/basics.html#applicationConfiguration" data-target="#applicationConfiguration">
									Configuration
									
								</a></li>
							
							
						
							
								
								<li class="divider"></li>
								<li><a href="modules/thundr/basics.html#webXml" data-target="#webXml">
									web.xml
									
								</a></li>
							
							
						
							
								
								
								<li><a href="modules/thundr/basics.html#modulesProperties" data-target="#modulesProperties">
									modules.properties
									
								</a></li>
							
							
						
							
								
								
								<li><a href="modules/thundr/basics.html#injectionConfiguration" data-target="#injectionConfiguration">
									InjectionConfiguration
									
								</a></li>
							
							
						
							
								
								
								<li><a href="modules/thundr/basics.html#applicationProperties" data-target="#applicationProperties">
									application.properties
									
								</a></li>
							
							
						
					
					
				
			  
					
				<li class="nav-header ">
					<a href="modules/thundr/controllers.html">
						
							Controllers
						
					</a>
				</li>

				
			  
					
				<li class="nav-header ">
					<a href="modules/thundr/views.html">
						
							Views
						
					</a>
				</li>

				
			  
					
				<li class="nav-header ">
					<a href="modules/thundr/actions.html">
						
							Actions
						
					</a>
				</li>

				
			  
					
				<li class="nav-header ">
					<a href="modules/thundr/injection-context.html">
						
							Dependancy injection
						
					</a>
				</li>

				
			  
			</ul>

			
		</div>
	</aside>

	<article id="basics" class="span9">
		<div class="page-header">
			<h1>thundr <small>basics</small></h1>
		</div>

		<section id="page-overview" class="overview">
			<h2>Overview</h2>
<p>thundr, like most other web frameworks, uses the <em>Model-View-Controller</em>, or <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a>, pattern for separation of concerns between data processing and view presentation.</p>
<p>In this pattern, the model and the view and the relationship between them is mediated by a controller.</p>
<p>In thundr, this control is enacted by the method invoked inside your controller class. <a href="modules/thundr/controllers.html">more</a><br>The view is represented by a <code>View</code> object, which is the return type of the controller method. <a href="modules/thundr/views.html">more</a><br>The model is provided to the view by the controller method, but the requirements of this depend on the type of view.</p>

		</section>

		 

			

			
				
				<section id="basicExample">
					<h4>Basic Example</h4>
<p>Routes file - routes.json <a href="modules/thundr/actions.html">more</a></p>
<pre><code class="language-json">{
    "<span class="attribute">/</span>"        : <span class="value"><span class="string">"com.threewks.web.Controller.home"</span>
}</span></code></pre>
<p>Controller - Controller.java <a href="modules/thundr/controllers.html">more</a></p>
<pre><code class="language-java"><span class="keyword">package</span> com.threewks.web;

<span class="keyword">import</span> java.util.HashMap;
<span class="keyword">import</span> java.util.Map;
<span class="keyword">import</span> com.threewks.thundr.view.jsp.JspView;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Controller</span> {</span>
    <span class="keyword">public</span> JspView home() {
        Map&lt;String, Object&gt; model = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();
        model.put(<span class="string">"message"</span>, <span class="string">"Hello World!"</span>);
        <span class="keyword">return</span> <span class="keyword">new</span> JspView(<span class="string">"home.jsp"</span>, model);
    }
}</code></pre>
<p>Jsp - /WEB-INF/jsp/home.jsp <a href="modules/thundr/views.html#jspView">more</a></p>
<pre><code class="language-html"><span class="vbscript">&lt;%@ page contentType=<span class="string">"text/html"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span>
<span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">head</span>&gt;</span>
        <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span> <span class="attribute">lang</span>=<span class="value">"en-us"</span>/&gt;</span>
    <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">body</span>&gt;</span>
        ${message}
    <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></pre>
<p>With these three files, if you were to visit the url <code>http://localhost:8080/</code> you would be served a page with the content &#39;Hello World!&#39;.</p>
<p>We can see the basics of thundr and the three elements of the MVC interacting here:</p>
<ul>
<li>an incoming request is mapped to a controller using a <a href="modules/thundr/actions.html#routes">route</a></li>
<li>Our <a href="modules/thundr/controllers.html">controller</a> method populates the <strong>model</strong> map with our message,</li>
<li>which is then provided to our <a href="modules/thundr/views.html">view</a>, a JspView.</li>
<li>thundr takes care of the rest, serving up our jsp as html, substituting the el variable \${message} with the text &#39;Hello World!&#39;.</li>
</ul>

				</section>
			


		

			

			
				
				<section id="applicationConfiguration">
					<h4>Application Configuration</h4>
<p>Beyond the basics of controller invocation and returning a view, there are several elements of configuration required for a thundr based application.</p>
<ul>
<li><a href="#webXml">web.xml</a> - configuring the thundr servlet</li>
<li><a href="#modulesProperties">modules.properties</a> - defining the thundr modules in use</li>
<li><a href="#injectionConfiguration">InjectionConfiguation</a> - your dependency injection configuration</li>
<li><a href="#applicationProperties">application properties</a> - your environmental properties</li>
</ul>

				</section>
			


		

			

			
				
				<section id="webXml">
					<h4><code>webXml</code></h4>
<p>The minimum web.xml required for a thundr app is to include the thundr servlet.</p>
<pre><code class="language-xml"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">web-app
</span>    <span class="attribute">xmlns</span>=<span class="value">"http://java.sun.com/xml/ns/javaee"</span>
    <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
    <span class="attribute">version</span>=<span class="value">"2.5"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">servlet</span>&gt;</span>
        <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>servlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">servlet-class</span>&gt;</span>com.threewks.thundr.WebFrameworkServlet<span class="tag">&lt;/<span class="title">servlet-class</span>&gt;</span>
        <span class="tag">&lt;<span class="title">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="title">load-on-startup</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">servlet</span>&gt;</span>
    <span class="tag">&lt;<span class="title">servlet-mapping</span>&gt;</span>
        <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>servlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="title">url-pattern</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">servlet-mapping</span>&gt;</span>
<span class="tag">&lt;/<span class="title">web-app</span>&gt;</span></code></pre>
<p>Beyond this, you can use any servlets, servlet filters or other web.xml features you want. Remember that thundr is capable of invoking a servlet as a controller if you so wish. </p>

				</section>
			


		

			

			
				
				<section id="modulesProperties">
					<h4><code>modules.properties</code></h4>
<p>thundr is extensible, it allows extra features and components to be added to applications. These components are called <strong>modules</strong>.</p>
<p>Modules are configured by adding them to resource <em>modules.properties</em>.</p>
<p>This file is a standard java properties file, where only the key values are of interest.<br>Each entry causes a module to be loaded. The minimum modules file only needs to contain the package for the module which is the application.</p>
<p>for the application defined in com.mycompany.myapp - modules.properties</p>
<pre><code class="language-java">com.mycompany.myapp=</code></pre>
<blockquote>
<p>The order of modules in this file is significant, you should always put your application module at the top.</p>
</blockquote>

				</section>
			


		

			

			
				
				<section id="injectionConfiguration">
					<h4><code>InjectionConfiguration</code></h4>
<p>A module is defined as a group of code and an <code>InjectionConfiguration</code> file.</p>
<p>You application uses an InjectionConfiguration to make available all the instances and classes you wish to inject into your controllers and each-other</p>
<p>Your injection configuration needs to implement <code>com.threewks.thundr.injection.InjectionConfiguration</code>. It also has to have a specific name, which is <strong>X</strong>InjectionConfiguration where <strong>X</strong> is the name of the package it resides in.  </p>
<p>For example, if your injection configuration is in the package <code>com.mycompany.myapp</code>, your<br>configuration must be the java class <code>com.mycompany.myapp.MyappInjectionConfiguration</code>. In this case, your <em>module</em> will be com.mycompany.myapp.</p>
<p>com.mycompany.myapp.MyappInjectionConfiguration</p>
<pre><code class="language-java"><span class="keyword">package</span> com.mycompany.myapp;

<span class="keyword">import</span> com.threewks.thundr.injection.BaseInjectionConfiguration;
<span class="keyword">import</span> com.threewks.thundr.injection.InjectionConfiguration;
<span class="keyword">import</span> com.threewks.thundr.injection.UpdatableInjectionContext;
<span class="keyword">import</span> com.threewks.thundr.profiler.BasicProfiler;
<span class="keyword">import</span> com.threewks.thundr.profiler.Profiler;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyappInjectionConfiguration</span> <span class="keyword">implements</span> <span class="title">InjectionConfiguration</span> {</span>

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> configure(UpdatableInjectionContext injectionContext) {
        injectionContext.inject(MyServiceImpl.class).as(MyServiceInterface.class);
        injectionContext.inject(MyRepositoryImpl.class).as(MyRepositoryInterface.class);
    }
}</code></pre>
<blockquote>
<p>The naming rules for an InjectionConfiguration are case sensitive! My<strong>a</strong>ppInjectionConfiguration is not the same as My<strong>A</strong>ppInjectionConfiguration.</p>
</blockquote>
<p>Rather than implement <code>InjectionConfiguration</code>, you can also extend <code>BaseInjectionConfiguration</code> for convenience.</p>

				</section>
			


		

			

			
				
				<section id="applicationProperties">
					<h4><code>application.properties</code></h4>
<p>thundr automatically loads properties from the <code>application.properties</code> file and puts them as named strings into the InjectionContext. This makes them available both in your InjectionConfiguration and also as constructor arguments to injected dependencies.</p>
<p>This file is suitable for specifying configuration values that change per environment. That is, while all the other configuration is generally environmentally agnostic, the application properties will generally not be. </p>
<p>This allows your built war file to be portable through environments without requiring rebuilding.</p>
<pre><code class="language-java">threadCount=<span class="number">20</span>
threadCount%dev=<span class="number">2</span>
serverUrl=localhost:<span class="number">8080</span>
serverUrl%production=www.production.com</code></pre>
<p>In the above example, all environments will have the properties <em>threadCount</em> and <em>serverUrl</em> injected into them, but the serverUrl for the environment named &#39;production&#39; will be different.</p>
<blockquote>
<p>The environment named &#39;dev&#39; is special, in that it specifically applies to local development, rather than a target deployment environment.</p>
</blockquote>

				</section>
			


		 

	</article>
</div>
	</div>
	
	<footer class="container">
		<div class="navbar">
			<div class="navbar-inner">
				<span class="navbar-text pull-right">
					Brought to you by <a href="http://www.3wks.com.au" title="3wks"><img class="threewksLogo" src="http://3wks.com.au/images/3wks_logo_2.png"/></a>
				</span>
				<span class="navbar-text">
					<a href="mailto:nick@3wks.com.au?Subject=thundr">
						<i class="icon icon-envelope-alt"></i> 
						Get in touch
					</a>
				</span>
				<span class="navbar-text">
					<a href="https://groups.google.com/forum/?fromgroups#!forum/thundr-framework">
						<i class="icon icon-group"></i> 
						Join us on Google Groups 
					</a>
				</span>
			</div>
		</div>
	</footer>

	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-37139757-1']);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>

	<script src="scripts/91b88f08.amd-app.js"></script>
</body>
</html>
		