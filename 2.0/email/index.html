---
layout: 2.0/base
title: Email
description: Sending emails with thundr
---

<div class="row">
	<aside class="module_nav_container col-md-3">
		<div class="module_nav">
			<ul class="nav nav-pills nav-stacked" role="navigation">
				<li class="nav-header active">
					<a href="#">
						Overview
					</a>
				</li>

				<li>
					<a href="#email" data-target="#email">
						Email
					</a>
				</li>

				<li>
					<a href="#example" data-target="#example">
						Example
					</a>
				</li>
				
				<li>
					<a href="#attachments" data-target="#attachments">
						Attachments
					</a>
				</li>

				<li>
					<a href="#javaMail" data-target="#javaMail">
						JavaMail
					</a>
				</li>
				
				<li>
					<a href="#limitations" data-target="#limitations">
						Limitations
					</a>
				</li>
			</ul>
		</div>
	</aside>

	<article class="col-md-9">
		<div class="page-header">
			<h1>thundr <small>email</small></h1>
		</div>

		<section id="email">
			<h2>Email</h2>

			<p>thundr has framework support for sending of emails. To send an email, you use the fluent api returned from
				the <code>Mailer.mail()</code> method.</p>

			<p>
				The <code>MailBuilder</code> returned from this method has a variety of email specific properties you can
				set.
			</p>
			
			<p>You specify the body of the email using the standard <code>View</code> framework of
				thundr. That is, you can provide the body of the email using anything you could render a <a
						href="{{ site.url }}/2.0/views/index.html">view</a> with. </p>
						
			<blockquote>
			<p> 
				The MailBuilder is immutable, so you should either use the fluent API by chaining methods, or remember to 
				reassign to a variable each time. 
			</p>
			</blockquote>
		</section>


		<section id="example">
			<h2>Example</h2>

{% highlight java %}
public void sendEmail(String recipientEmail, String recipientName){
    Map<String, Object> model = new HashMap<String, Object>();
    model.put("message", "Hello world!");
    JspView view = new JspView("emails/test.jsp", model);

    MailBuilder mail = mailer.mail()
    	.to(recipientEmail, recipientName)
    	.from("no-reply@mydomain.com", "no-reply")
    	.replyTo("no-reply@mydomain.com", "no-reply")
    	.subject("Test email")
    	.body(view)
    	.send();
}
{% endhighlight %}
		</section>

<section id="attachments">
			<h2>Attachments</h2>
			<p>
				You can include attachments on emails as either inline (which can be referred to in the body content of the email),
				or as attachments.
			</p>
			<p> 
				For example, to send a receipt email with a pdf attachment, and the logo rendered into the email, you could send the following:
			</p>
{% highlight java %}
byte[] logoJpgData = ...
byte[] pdfData = ...
View view = new StringView("<html> <body> <img src="cid:logo"/> </body> </html>")
   	.withContentType("text/html");
MailBuilder mail = mailer.mail()
   	.to(recipientEmail, recipientName)
   	.from("no-reply@mydomain.com", "no-reply")
   	.subject("Receipt email")
   	.body(view)
   	.attach(new FileView("logo", logoJpgData, "image/jpeg").withDisposition(Disposition.Inline))
   	.attach(new FileView("receipt.pdf", pdfData, "application/pdf").withDisposition(Disposition.Attachment))
	.send();
{% endhighlight %}			
		</section>

		<section id="javaMail">
			<h2>JavaMail</h2>

			<p>
				The <code>JavaMailMailer</code> is the default implementation which is included with thundr core. 
			</p>
			<p>
				To set it up, you just need to make it available in the <code>InjectionContext</code> in your 
				<a href="{{ site.url }}/2.0/thundr/basics.html#applicationModule">ApplicationModule</a>.
			</p>

{% highlight java %}
...
injectionContext.inject(JavaMailMailer.class).as(Mailer.class);
...
{% endhighlight %}

			<h3>Limitations</h3>

			<p>The JavaMailMailer implementation of Mailer is built on top of the standard <code>javax.mail</code> api. If your target platform cannot send
				email using this api, or if it requires additional configuration you will need to configure this yourself.
			</p>
		</section>
	</article>
</div>

		